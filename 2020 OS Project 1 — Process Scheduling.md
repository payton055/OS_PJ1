 2. 1. # **2020 OS Project 1** — Process Scheduling

       ### B06902079 資工二 陳柏瑋

       ### 1

       對於FIFO和SJF, 使用vfork()讓在執行的child process可以跑完,

       對於RR, 在fork()之後child process 先使用sched_setscheduler()調低自己的priority, 讓main能夠利用調整各個child process的priority來改變執行的順序

       對於PSJF, 若當前所有child process都已經產生, 那麼只要將剩下時間最短的child process的priority設為最高即可，否則令當前剩下時間最短的child process執行到下一個child process ready time, 再給予剩下時間最短的child process 高的 priority

       ### 2

       Kernel version : 4.14.25

       ### 3 Result

       #### FIFO:
##### FIFO_1.txt
1 unit of time : 0.000407 sec

Real : 
|      |              |              |
| ---- | ------------ | ------------ |
|**P1**| 0.000014087| 0.203405747|
|**P2**| 0.203503209| 0.406894829|
|**P3**| 0.407008693| 0.610400283|
|**P4**| 0.610491373| 0.813882943|
|**P5**| 0.814002447| 1.017394087|

Theory : 
|      |              |              |
| ---- | ------------ | ------------ |
|**P1**| 0.000000| 0.203392|
|**P2**| 0.203392| 0.406783|
|**P3**| 0.406783| 0.610175|
|**P4**| 0.610175| 0.813566|
|**P5**| 0.813566| 1.016958|
error = 0.000436087 sec 
##### FIFO_2.txt
1 unit of time : 0.000415 sec

Real : 
|      |              |              |
| ---- | ------------ | ------------ |
|**P1**| 0.000011282| 33.185451415|
|**P2**| 33.185558516| 35.259648644|
|**P3**| 35.259798385| 35.674616635|
|**P4**| 35.674722133| 36.089540282|

Theory : 
|      |              |              |
| ---- | ------------ | ------------ |
|**P1**| 0.000000| 33.185440|
|**P2**| 33.185440| 35.259530|
|**P3**| 35.259530| 35.674348|
|**P4**| 35.674348| 36.089166|

error = 0.802119718 sec 

##### FIFO_3.txt

1 unit of time : 0.000415 sec

Real : 
|      |              |              |
| ---- | ------------ | ------------ |
|**P1**| 0.000015669| 3.316719875|
|**P2**| 3.316849027| 5.389789188|
|**P3**| 5.389912529| 6.633676694|
|**P4**| 6.633770680| 7.048358819|
|**P5**| 7.048485947| 7.463074096|
|**P6**| 7.463185394| 7.877773563|
|**P7**| 7.877883008| 9.536235151|

Theory : 
|      |              |              |
| ---- | ------------ | ------------ |
|**P1**| 0.000000| 3.316704|
|**P2**| 3.316704| 5.389644|
|**P3**| 5.389644| 6.633408|
|**P4**| 6.633408| 7.047996|
|**P5**| 7.047996| 7.462584|
|**P6**| 7.462584| 7.877172|
|**P7**| 7.877172| 9.535524|

error = 0.00071115099 sec

##### FIFO_4.txt

1 unit of time : 0.000407 sec

Real : 
|        |             |             |
| ------ | ----------- | ----------- |
| **P1** | 0.000014627 | 0.813080748 |
| **P2** | 0.813188510 | 1.016455156 |
| **P3** | 1.016575411 | 1.097882170 |
| **P4** | 1.097983630 | 1.301394716 |

Theory : 
|        |          |          |
| ------ | -------- | -------- |
| **P1** | 0.000000 | 0.813066 |
| **P2** | 0.813066 | 1.016333 |
| **P3** | 1.016333 | 1.097639 |
| **P4** | 1.097639 | 1.300906 |

error = 0.000488716 sec

##### FIFO_5.txt

1 unit of time : 0.000432

Real : 
|        |             |             |
| ------ | ----------- | ----------- |
| **P1** | 0.000017022 | 3.453617179 |
| **P2** | 3.453731032 | 5.612231219 |
| **P3** | 5.612365701 | 6.907465831 |
| **P4** | 6.907578082 | 7.339278225 |
| **P5** | 7.339396317 | 7.771096470 |
| **P6** | 7.771212839 | 8.202912992 |
| **P7** | 8.203013651 | 9.929813774 |

Theory : 
|        |          |          |
| ------ | -------- | -------- |
| **P1** | 0.000000 | 3.453600 |
| **P2** | 3.453600 | 5.612100 |
| **P3** | 5.612100 | 6.907200 |
| **P4** | 6.907200 | 7.338900 |
| **P5** | 7.338900 | 7.770600 |
| **P6** | 7.770600 | 8.202300 |
| **P7** | 8.202300 | 9.929100 |

error = 0.000713774

#### SJF : 

##### SJF_1.txt

1 unit of time : 0.000640 sec

Real : 
|        |             |             |
| ------ | ----------- | ----------- |
| **P2** | 0.000017463 | 1.280317564 |
| **P3** | 1.280417622 | 1.920567763 |
| **P4** | 1.920685003 | 4.481285135 |
| **P1** | 4.481400011 | 8.962858952 |

Theory : 

total = 8.96 sec

error = 0.002858952

##### SJF_2.txt

1 unit of time : 0.000406 sec

Real : 
|        |             |             |
| ------ | ----------- | ----------- |
| **P1** | 0.041027481 | 0.081672925 |
| **P3** | 0.081744850 | 0.163035538 |
| **P2** | 0.163131017 | 1.788943179 |
| **P4** | 1.789053465 | 3.414865606 |
| **P5** | 3.414975533 | 6.260146694 |

Theory : 

total = 6.2524 sec

error = 0.007746694 sec

##### SJF_3.txt

1 unit of time : 0.000421 sec

Real : 
|        |             |              |
| ------ | ----------- | ------------ |
| **P1** | 0.042800076 | 1.309093146  |
| **P4** | 1.309197461 | 1.313464865  |
| **P5** | 1.313526531 | 1.317956109  |
| **P6** | 1.318045487 | 3.002725610  |
| **P7** | 3.002808896 | 4.687489050  |
| **P2** | 4.687606490 | 6.793456657  |
| **P3** | 6.793583615 | 9.741773778  |
| **P8** | 9.741875319 | 13.532405459 |

Theory : 

total = 13.48042 sec

error = 0.051985459 sec

##### SJF_4.txt

1 unit of time : 0.000427 sec

Real : 
|        |             |             |
| ------ | ----------- | ----------- |
| **P1** | 0.000014788 | 1.281920922 |
| **P2** | 1.282061816 | 1.709363971 |
| **P3** | 1.709489386 | 3.418697534 |
| **P5** | 3.418820845 | 3.846123020 |
| **P4** | 3.846238236 | 4.700842415 |

Theory : 

total = 4.647 sec

error = 0.053842415 sec

##### SJF_5.txt

1 unit of time : 0.000407 sec

Real : 
|        |             |             |
| ------ | ----------- | ----------- |
| **P1** | 0.000014057 | 0.813158224 |
| **P2** | 0.813280263 | 1.016566355 |
| **P3** | 1.016673455 | 1.219959547 |
| **P4** | 1.220049226 | 1.423335378 |

Theory : 

total = 1.4245 sec

error = 0.001164622 sec

#### RR : 

##### RR_1.txt

1 unit of time : 0.000431 sec

Real : 
|        |             |             |
| ------ | ----------- | ----------- |
| **P1** | 0.000097142 | 0.215536498 |
| **P2** | 0.215665120 | 0.431104436 |
| **P3** | 0.431212970 | 0.646652296 |
| **P4** | 0.646772401 | 0.862211788 |
| **P5** | 0.862341441 | 1.077780827 |

Theory : 

total = 1.0775sec

error = 0.000280827 sec

##### RR_2.txt

1 unit of time : 0.000411 sec

Real : 
|      |              |              |
| ---- | ------------ | ------------ |
|**P1**|0.246901466|3.362957648|
|**P2**|0.452677528|3.980162753|

Theory : 

total = 3.699sec

error = 0.281162753 sec

##### RR_3.txt

1 unit of time : 0.000414 sec

Real : 
|        |             |              |
| ------ | ----------- | ------------ |
| **P3** | 1.740331543 | 7.576153888  |
| **P1** | 0.497221405 | 8.404912982  |
| **P2** | 1.118765909 | 8.612183106  |
| **P6** | 2.983493298 | 11.747441473 |
| **P5** | 2.776308143 | 12.576179298 |
| **P4** | 2.569123809 | 12.990639737 |

Theory : 

total = 12.9168sec

error = 0.073839737 sec

##### RR_4.txt

1 unit of time : 0.000406 sec

Real : 
|        |             |             |
| ------ | ----------- | ----------- |
| **P4** | 0.609965507 | 2.235956904 |
| **P5** | 0.813241380 | 2.439302017 |
| **P6** | 1.016525528 | 2.642637702 |
| **P3** | 0.406704813 | 5.932880236 |
| **P7** | 1.219787324 | 7.355663758 |
| **P2** | 0.203413080 | 8.168710723 |
| **P1** | 0.000032351 | 9.388234433 |

Theory : 

total = 9.338sec

error = 0.050234433 sec

##### RR_5.txt

1 unit of time : 0.000521 sec

Real : 
|        |             |              |
| ------ | ----------- | ------------ |
| **P4** | 0.781379930 | 2.911281067  |
| **P5** | 1.041760007 | 3.171741855  |
| **P6** | 1.349146419 | 3.432196442  |
| **P3** | 0.520987781 | 7.609042543  |
| **P7** | 1.609525774 | 9.431621579  |
| **P2** | 0.260509379 | 10.473140053 |
| **P1** | 0.000031910 | 12.035370671 |

Theory : 

total = 11.983sec

error = 0.052370671 sec

#### PSJF

##### PSJF_1.txt

1 unit of time : 0.000508 sec

Real : 
|        |             |              |
| ------ | ----------- | ------------ |
| **P4** | 1.524537321 | 3.048786632  |
| **P3** | 1.016368423 | 5.081247490  |
| **P2** | 0.508200978 | 8.129871867  |
| **P1** | 0.000032231 | 12.702771534 |

Theory : 

total = 12.7sec

error = 0.002771534 sec

##### PSJF_2.txt

1 unit of time : 0.000416 sec

Real : 
|        |             |             |
| ------ | ----------- | ----------- |
| **P2** | 0.416243262 | 0.832363534 |
| **P1** | 0.000033192 | 1.664756985 |
| **P5** | 2.936320430 | 3.352440782 |
| **P4** | 2.081096809 | 3.352979182 |
| **P3** | 1.664893531 | 4.601391295 |

Theory : 

total = 4.576sec

error = 0.043791295 sec

##### PSJF_3.txt

1 unit of time : 0.000406 sec

Real : 
|        |             |             |
| ------ | ----------- | ----------- |
| **P2** | 0.203359189 | 0.406596019 |
| **P3** | 0.406781507 | 0.610018336 |
| **P4** | 0.610174689 | 0.813411489 |
| **P1** | 0.000032541 | 1.423232985 |

Theory : 

total = 1.421sec

error = 0.002232985 sec

##### PSJF_4.txt

1 unit of time : 0.000412 sec

Real : 
|        |             |             |
| ------ | ----------- | ----------- |
| **P3** | 0.041367439 | 0.453541199 |
| **P2** | 0.000066034 | 1.236712709 |
| **P4** | 1.236845388 | 2.885377673 |
| **P1** | 2.885518026 | 5.770449402 |

Theory : 

total = 5.768sec

error = 0.052370671 sec

##### PSJF_5.txt

1 unit of time : 0.000423 sec

Real : 
|        |             |             |
| ------ | ----------- | ----------- |
| **P1** | 0.042413400 | 0.084736120 |
| **P3** | 0.084911710 | 0.169556769 |
| **P2** | 0.169672727 | 1.862569030 |
| **P4** | 1.862704424 | 3.555600798 |
| **P5** | 3.555731583 | 6.518299924 |

Theory : 

total = 6.4719sec

error = 0.046399924sec

### 4 Conclusion

切回scheduler的次數越多，總共的error也越大，因此SJF跟FIFO的error比RR跟PSJF小